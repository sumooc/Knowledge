#### **组合模式：**

##### 1、概述

组合多个对象形成树形结构以表示具有“部分—整体”关系的层次结构。组合模式对单个对象（即叶子对象）和组合对象（即容器对象）的使用具有一致性，又可以称为“部分—整体”（Part-Whole）模式，它是一种对象结构型模式。

##### 2、适用性

a、在具有整体和部分的层次结构中，希望通过一种方式忽略整体与部分的差异，客户端可以一致性地对待它们。
b、在一个使用面向对象语言开发的系统中需要处理一个树形结构。
c、在一个系统中能够分离出叶子对象和容器对象，而且它们的类型不固定，将来需要增加一些新的类型。

Java SE中的AWT和Swing包的设计就基于组合模式

##### 3、参与者

a、Component（抽象构件）：它可以是接口或抽象类，为叶子构件和容器构件对象声明接口，在该角色中可以包含所有子类共有行为的声明和实现。
b、Leaf（叶子构件）：它在组合模式结构中表示叶子节点对象。叶子节点没有子节点，它实现了在抽象构件中定义的行为。
c、Composite（容器构件）：它在组合模式结构中表示容器节点对象。容器节点包含子节点，其子节点可以是叶子节点，也可以是容器节点。它提供一个集合用于存储子节点，实现了在抽象构件中定义的行为，包括那些访问及管理子构件的方法，在其业务方法中可以递归调用其子节点的业务方法。

![](E:\JavaTool\Knowledge\Java\DesignPatterns\CompositePattern\src\main\resources\参与者.jpg)



##### 4、透明组合模式和安全组合模式

1．透明组合模式：透明组合模式中，抽象构件Component中声明了所有用于管理成员对象的方法，包括add（）、remove（）以及getChild（）等方法，这样做的好处是确保所有的构件类都有相同的接口。透明组合模式的缺点是不够安全，因为叶子对象和容器对象在本质上是有区别的。叶子对象不可能有下一个层次的对象，即不可能包含成员对象，因此为其提供add（）、remove（）以及getChild（）等方法是没有意义的。

2．安全组合模式：安全组合模式中，在抽象构件Component中没有声明任何用于管理成员对象的方法，而是在Composite类中声明并实现这些方法。这种做法是安全的，因为根本不向叶子对象提供这些管理成员对象的方法。
